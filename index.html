<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>üî• Fire Drake Merge üî•</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg-top:#660000;
      --bg-mid:#990000;
      --bg-bottom:#330000;
      --stat-font: 18px;
      --cell-size: 88px;
    }

    html,body{height:100%;margin:0;padding:0}
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(to bottom, var(--bg-top), var(--bg-mid), var(--bg-bottom));
      color: #fff;
      -webkit-font-smoothing:antialiased;
      text-align: center;
      padding: 18px 12px;
    }

    h1{
      margin: 6px 0 14px;
      font-size: 34px;
      letter-spacing: 1px;
      color: #ff6b6b;
      text-shadow: 0 0 14px rgba(255,0,0,0.6);
    }

    /* Stats */
    #stats{
      display:flex;
      justify-content:center;
      gap:18px;
      align-items:center;
      margin-bottom:14px;
      flex-wrap:wrap;
      font-weight:700;
      font-size:var(--stat-font);
      text-shadow: 0 0 6px rgba(0,0,0,0.6);
    }
    #stats div { padding:6px 10px; border-radius:8px; background: rgba(0,0,0,0.18); box-shadow: 0 4px 10px rgba(0,0,0,0.45); }

    /* colored stat values */
    #coins { color: gold; font-weight:900; text-shadow: 0 0 8px rgba(255,215,0,0.6); }
    #ingots { color: goldenrod; font-weight:900; text-shadow: 0 0 8px rgba(218,165,32,0.6); }
    #income { color: #7CFC00; font-weight:900; text-shadow: 0 0 8px rgba(124,252,0,0.25); }
    #multiplier { color: violet; font-weight:900; text-shadow: 0 0 8px rgba(148,0,211,0.25); }
    #nextCost { color: #fff; opacity:0.95; font-weight:800; }

    /* Grid */
    #game {
      margin: 18px auto;
      display: grid;
      gap: 10px;
      justify-content: center;
      width: fit-content;
      padding: 14px;
      border-radius: 14px;
      background: rgba(0,0,0,0.15);
      box-shadow: 0 8px 30px rgba(0,0,0,0.6), inset 0 2px 10px rgba(255,0,0,0.03);
    }

    .cell {
      width: var(--cell-size);
      height: var(--cell-size);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.28));
      border-radius: 10px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      border: 2px solid rgba(255,255,255,0.06);
      box-shadow: 0 6px 18px rgba(0,0,0,0.6), 0 0 10px rgba(255,80,80,0.04);
      cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease;
      position: relative;
    }
    .cell:hover { transform: translateY(-4px); box-shadow: 0 12px 30px rgba(0,0,0,0.7), 0 0 18px rgba(255,60,60,0.12); }

    .drake { display:flex; align-items:center; justify-content:center; flex-direction:column; pointer-events:auto; }
    .drake img { width: 64px; height: 64px; user-select:none; -webkit-user-drag:none; display:block; }
    .drake span { margin-top:6px; font-size:12px; font-weight:800; text-shadow: 0 0 6px rgba(0,0,0,0.6); }

    /* Label colors by level */
    .lvl1 { color: #ffffff; }   /* white */
    .lvl2 { color: #00ffcc; }   /* aqua */
    .lvl3 { color: #33ff77; }   /* green */
    .lvl4 { color: #fff266; }   /* yellow */
    .lvl5 { color: #ffb347; }   /* orange */
    .lvl6 { color: #ff66b2; }   /* pink */
    .lvl7 { color: #b3b3ff; }   /* light purple */
    .lvl8 { color: #ffd700; }   /* gold */

    /* selection highlight */
    .selected { outline: 4px solid rgba(255,255,0,0.95); outline-offset: -6px; border-radius:10px; }

    /* Controls (vertical) */
    #controls {
      margin: 18px auto 30px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    .btn {
      width: 260px;
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      font-weight: 800;
      font-size: 15px;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
      transition: transform .12s, box-shadow .12s, filter .12s;
      text-transform: none;
    }
    .btn:active { transform: translateY(2px); }
    .btn:disabled { filter: grayscale(.6) brightness(.8); cursor: not-allowed; box-shadow:none; }

    /* colored buttons with glow */
    #buyDrake { background: linear-gradient(180deg,#ffac33,#ff8a00); color:#3a1200; box-shadow: 0 8px 30px rgba(255,140,0,0.25); }
    #buyDrake:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(255,140,0,0.35); }

    #buyIngot { background: linear-gradient(180deg,#ffea60,#ffcf00); color:#2b1b00; }
    #buyIngot:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(255,207,0,0.28); }

    #expandGrid { background: linear-gradient(180deg,#7efc7e,#28c428); color:#062606; }
    #expandGrid:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(40,196,40,0.28); }

    #saveGame { background: linear-gradient(180deg,#8fd1ff,#46aaff); color:#042d40; }
    #saveGame:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(70,170,255,0.2); }

    #prestige { background: linear-gradient(180deg,#d9a3ff,#b06eff); color:#2b003f; }
    #prestige:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(176,110,255,0.22); }

    #deleteProgress { background: linear-gradient(180deg,#ff5b5b,#c62828); color:#2b0000; }
    #deleteProgress:hover:not(:disabled){ box-shadow: 0 14px 40px rgba(200,50,50,0.28); }

    /* small responsiveness */
    @media (max-width:520px){
      .btn { width: 90%; }
      #game { transform: scale(.92); }
    }
  </style>
</head>
<body>
  <h1>üî• Fire Drake Merge üî•</h1>

  <div id="stats">
    <div>Coins: <span id="coins">20</span></div>
    <div>Ingots: <span id="ingots">0</span></div>
    <div>Passive Income: <span id="income">0 /sec</span></div>
    <div>Multiplier: <span id="multiplier">1x</span></div>
    <div>Next Drake: <span id="nextCost">20</span></div>
  </div>

  <div id="game" aria-label="Drake grid"></div>

  <div id="controls">
    <button id="buyDrake" class="btn">Buy Drake (20)</button>
    <button id="buyIngot" class="btn">Buy Ingot (1K)</button>
    <button id="expandGrid" class="btn">Expand Grid</button>
    <button id="saveGame" class="btn">Save Progress</button>
    <button id="prestige" class="btn">Prestige (1M)</button>
    <button id="deleteProgress" class="btn">‚ùå Delete Progress</button>
  </div>

<script>
/* ---------- Game state ---------- */
let coins = 20;
let ingots = 0;
let gridSize = 3;
let drakeCost = 20;
let selectedDrake = null;
let multiplier = 1; // prestige multiplier

/* DOM refs */
const game = document.getElementById('game');
const coinsEl = document.getElementById('coins');
const ingotsEl = document.getElementById('ingots');
const incomeEl = document.getElementById('income');
const multEl = document.getElementById('multiplier');
const nextCostEl = document.getElementById('nextCost');

const buyDrakeBtn = document.getElementById('buyDrake');
const buyIngotBtn = document.getElementById('buyIngot');
const expandGridBtn = document.getElementById('expandGrid');
const saveBtn = document.getElementById('saveGame');
const prestigeBtn = document.getElementById('prestige');
const deleteBtn = document.getElementById('deleteProgress');

/* ---------- Drake configuration (levels) ---------- */
/* incomes are coins per second per drake level */
const drakeData = {
  1: { income: 1,   
