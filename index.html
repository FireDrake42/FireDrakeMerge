<script>
  function formatNumber(num) {
    if (num >= 1000000) {
      return (num / 1000000).toFixed(1).replace(/\.0$/, "") + "M"; // 1M = 1,000,000
    } else if (num >= 1000) {
      return (num / 1000).toFixed(1).replace(/\.0$/, "") + "K";   // 1K = 1,000
    } else {
      return Math.floor(num).toString();
    }
  }

  function updateCoins() {
    coinDisplay.textContent = formatNumber(coins);
    buyBtn.disabled = coins < 20;
    ingotBtn.disabled = coins < 1000;

    if (expansionCosts[gridSize]) {
      expandBtn.textContent = `Expand Grid to ${gridSize + 1}x${gridSize + 1} (${formatNumber(expansionCosts[gridSize])} coins)`;
      expandBtn.disabled = coins < expansionCosts[gridSize];
    } else {
      expandBtn.textContent = "Max Grid Reached";
      expandBtn.disabled = true;
    }
  }
</script>
